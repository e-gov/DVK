<?xml version="1.0" encoding="UTF-8"?>

<mapping>
	<include href="commons.xml" />
	<include href="transport.v1.xml" />
	<include href="meta-manual.v1.xml" />
	<include href="meta-automatic.v1.xml" />
	<include href="metaxml.xml" />
	<!--
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		Container1
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->
	<class name="dvk.api.container.v1.ContainerVer1">
		<map-to xml="dokument" ns-uri="http://www.riik.ee/schemas/dhl" ns-prefix="dhl" />

		<field name="metainfo" type="dvk.api.container.v1.Metainfo">
			<bind-xml name="metainfo" />
		</field>

		<field name="transport" type="dvk.api.container.v1.Transport">
			<bind-xml name="transport" />
		</field>

		<field name="ajalugu" type="dvk.api.container.v1.Ajalugu">
			<bind-xml name="ajalugu" />
		</field>

		<field name="metaxml" type="dvk.api.container.Metaxml">
			<bind-xml name="metaxml" />
		</field>

		<field name="signedDoc" type="dvk.api.container.v1.SignedDoc">
			<bind-xml name="SignedDoc" xmlns="http://www.sk.ee/DigiDoc/v1.3.0#" ns-prefix="" />
		</field>
	</class>
	<!--
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		Metainfo
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->
	<class name="dvk.api.container.v1.Metainfo">
		<map-to xml="metainfo" />

		<field name="metaManual" type="dvk.api.container.v1.MetaManual">
			<bind-xml name="mm:metainfo" xmlns:mm="http://www.riik.ee/schemas/dhl-meta-manual" />
		</field>

		<field name="metaAutomatic" type="dvk.api.container.v1.MetaAutomatic">
			<bind-xml name="ma:metainfo" xmlns:ma="http://www.riik.ee/schemas/dhl-meta-automatic" />
		</field>
	</class>
	<!--
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		Document
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->
	<class name="dvk.api.container.v1.SignedDoc">
		<map-to xml="SignedDoc" xmlns="http://www.sk.ee/DigiDoc/v1.3.0#" />

		<field name="ddocNamespace" type="string"><!-- adds attribute with DigiDoc namespace -->
			<bind-xml name="xmlns" node="attribute" />
		</field>

		<field name="format" type="string">
			<bind-xml name="format" node="attribute" />
		</field>

		<field name="version" type="string">
			<bind-xml name="version" node="attribute" />
		</field>

		<field name="dataFiles" type="dvk.api.container.v1.DataFile" collection="arraylist">
			<bind-xml name="DataFile" node="element" xmlns="http://www.sk.ee/DigiDoc/v1.3.0#" />
		</field>
	</class>

	<class name="dvk.api.container.v1.DataFile">
		<map-to xml="DataFile" xmlns="http://www.sk.ee/DigiDoc/v1.3.0#" />

		<field name="fileBase64Content" type="string" >
			<bind-xml node="text"/>
		</field>

		<field name="fileContentType" type="string">
			<bind-xml name="ContentType" node="attribute" />
		</field>

		<field name="fileName" type="string">
			<bind-xml name="Filename" node="attribute" />
		</field>

		<field name="fileId" type="string">
			<bind-xml name="Id" node="attribute" />
		</field>

		<field name="fileMimeType" type="string">
			<bind-xml name="MimeType" node="attribute" />
		</field>

		<field name="fileSize" type="string">
			<bind-xml name="Size" node="attribute" />
		</field>

		<field name="ddocNamespace" type="string">
			<bind-xml name="xmlns" node="attribute" />
		</field>
	</class>
	<!--
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		AddressType
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->
	<class name="dvk.api.container.v1.AddressType">
		<field name="regNr" type="string">
			<bind-xml name="regnr" node="element" />
		</field>

		<field name="asutuseNimi" type="string">
			<bind-xml name="asutuse_nimi" node="element" />
		</field>

		<field name="allyksuseKood" type="string">
			<bind-xml name="allyksuse_kood" node="element" />
		</field>

		<field name="allyksuseNimetus" type="string">
			<bind-xml name="allyksuse_nimetus" node="element" />
		</field>

		<field name="isikukood" type="string">
			<bind-xml name="isikukood" node="element" />
		</field>

		<field name="ametikohaKood" type="long">
			<bind-xml name="ametikoha_kood" node="element" />
		</field>

		<field name="ametikohaNimetus" type="string">
			<bind-xml name="ametikoha_nimetus" node="element" />
		</field>

		<field name="epost" type="string">
			<bind-xml name="epost" node="element" />
		</field>

		<field name="nimi" type="string">
			<bind-xml name="nimi" node="element" />
		</field>

		<field name="osakonnaKood" type="string">
			<bind-xml name="osakonna_kood" node="element" />
		</field>

		<field name="osakonnaNimi" type="string">
			<bind-xml name="osakonna_nimi" node="element" />
		</field>
	</class>
	<!--
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		metainfo.koostajaKuupaev.dateHandler
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->
	<field-handler name="metainfo.koostajaKuupaev.dateHandler" class="dvk.api.container.CustomDateHandler">
		<param name="fieldName" value="koostajaKuupaev" />
		<param name="info" value="DateHandler for Metainfo.KoostajaKuupaev" />
	</field-handler>
	<!--
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		metaxml.letterMetaData.signDate.dateHandler
		~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	-->
	<field-handler name="metaxml.letterMetaData.signDate.dateHandler" class="dvk.api.container.CustomDateHandler">
		<param name="fieldName" value="signDate" />
		<param name="info" value="DateHandler for LetterMetaData.SignDate" />
	</field-handler>
</mapping>